---
title: C++
date: 2024/3/15
description: View examples of all possible Markdown options.
tag: BackEnd
author: You
---

## 语言
#### 模板
包括函数模板和类模板，均使用泛型参数；使用不同参数进行实例化时包括显式和隐式
显式实例化：在函数名后的<>中指定模板参数的实际类型。同时，模板可以支持多个模板参数。
模板参数匹配原则：
1. 一个非模板函数可以和一个同名的函数模板同时存在，而且该函数模板还可以被实例化为这个非模板函数。但可以通过显式实例化，走模板函数。
2. 对于非模板函数和同名函数模板，如果其他条件都相同，在调动时会优先调用非模板函数而不会从该模板产生出一个实例。如果模板可以产生一个具有更好匹配的函数， 那么将选择模板。
3. 

## 网络

## 项目：TinyWebServer
### 线程池
涉及线程、锁机制。使用一个循环队列将主线程和工作线程解耦：主线程往工作队列中插入任务，工作线程通过竞争来取得任务并执行它。
通俗地说，主线程A的工作内容是accept新的客户端连接并生成fd，工作进程B1/2/3来处理工作线程下发单个连接的IO时间。
### 同步/异步日志系统
涉及设计模式，自定义阻塞队列。主要涉及两个模块：日志的定义和使用、单例模式与阻塞队列的定义。
* 日志由服务器自动创建，并记录运行状态、错误信息、数据访问信息；
* 同步日志：写入函数与工作线程串行执行，由于涉及IO，当单条日志较长时，同步模式会阻塞整个处理流程，服务器错=所能处理的并发能力有所下降。
* 阻塞队列：将生产者-消费者模型进行封装，使用循环数组实现队列，作为二者共享缓存区。
* 异步日志：将所写日志内容先存入阻塞队列，写线程从阻塞队列取出内容，写入日志。
* 单例模式：保证一个类只创建一个实例，同时提供全局访问的方法。
  * 实现思路：私有化它的构造函数，以防止外界创建单例类的对象；使用类的私有静态指针变量指向类的唯一实例，并用一个公有的静态方法获取该实例。
  * 有两种实现方法，分别是懒汉和饿汉模式。顾名思义，懒汉模式，即非常懒，不用的时候不去初始化，所以在第一次被使用时才进行初始化；饿汉模式，即迫不及待，在程序运行时立即初始化。

## 项目：KV存储器
